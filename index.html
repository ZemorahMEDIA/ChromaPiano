<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ChromaPiano</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://unpkg.com/soundfont-player@latest/dist/soundfont-player.js"></script>
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  <!-- Include 'Great Vibes' font for the title -->
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
  <!-- Include Noto Music Font for musical symbols -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Music&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Synthesizer container -->
  <div id="synthesizer">
    <div id="title-container">
      <h1>
        <span class="handscript">John Martin Skyrie's</span>
        <span class="rainbow">ChromaPiano</span>
      </h1>
    </div>
    <!-- Synthesizer panel -->
    <div id="synthesizer-panel">
      <div id="controls">
        <div class="control-group">
          <div class="group-label"><span>Transport</span></div>
          <div class="group-buttons">
            <button id="loop-btn">
              <!-- Loop icon -->
              <svg viewBox="0 0 24 24">
                <path d="M7 7h5v2H7v2l-3-3 3-3v2zm10 8h-5v2h5v2l3-3-3-3v2zM4 12c0-4.41 3.59-8 8-8v2a6 6 0 0 0 0 12v2c-4.41 0-8-3.59-8-8zm16 0c0 4.41-3.59 8-8 8v-2a6 6 0 0 0 0-12V4c4.41 0 8-3.59 8-8z"></path>
              </svg>
            </button>
            <button id="record-btn">
              <!-- Red circle icon -->
              <svg viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" fill="red"></circle>
              </svg>
            </button>
            <button id="play-btn" disabled>
              <!-- Green triangle pointing right -->
              <svg viewBox="0 0 24 24">
                <polygon points="8,5 19,12 8,19" fill="green"></polygon>
              </svg>
            </button>
            <button id="stop-btn" disabled>
              <!-- Grey square -->
              <svg viewBox="0 0 24 24">
                <rect x="5" y="5" width="14" height="14" fill="grey"></rect>
              </svg>
            </button>
            <button id="prev-note-btn">
              <!-- Left arrow icon -->
              <svg viewBox="0 0 24 24">
                <polygon points="14,18 8,12 14,6" fill="white"></polygon>
              </svg>
            </button>
            <button id="reset-midi-btn">
              <!-- No way icon -->
              <svg viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" stroke="white" stroke-width="2" fill="none" />
                <line x1="5" y1="5" x2="19" y2="19" stroke="white" stroke-width="2" />
              </svg>
            </button>
            <button id="next-note-btn">
              <!-- Right arrow icon -->
              <svg viewBox="0 0 24 24">
                <polygon points="10,6 16,12 10,18" fill="white"></polygon>
              </svg>
            </button>
          </div>
        </div>
        <div class="control-group">
          <div class="group-label"><span>File</span></div>
          <div class="group-buttons">
            <button id="save-btn" class="text-button">Save</button>
            <button id="load-btn" class="text-button">Load</button>
          </div>
        </div>
        <div class="control-group">
          <div class="group-label"><span>Memory</span></div>
          <div class="group-buttons">
            <button id="clear-btn">
              <!-- Recycle bin icon -->
              <svg viewBox="0 0 24 24">
                <path d="M3 6h18" stroke="#fff" stroke-width="2"/>
                <path d="M19 6l-1 14a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1L5 6" stroke="#fff" stroke-width="2"/>
                <path d="M10 11v6" stroke="#fff" stroke-width="2"/>
                <path d="M14 11v6" stroke="#fff" stroke-width="2"/>
                <path d="M9 6V4h6v2" stroke="#fff" stroke-width="2"/>
              </svg>
            </button>
            <button id="add-memory-btn" class="text-button">M+</button>
            <button id="remove-memory-btn" class="text-button">M-</button>
            <button id="memory-editor-btn">
              <!-- Pen icon -->
              <svg viewBox="0 0 24 24">
                <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM22.41 6.34a1.21 1.21 0 0 0 0-1.71l-2.34-2.34a1 1 0 0 0-1.71 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path>
              </svg>
            </button>
          </div>
        </div>
        <div class="control-group">
          <div class="group-label"><span>Display</span></div>
          <div class="group-buttons">
            <button id="keyboard-toggle-btn" class="pressed">
              <!-- Keyboard icon -->
              <svg viewBox="0 0 24 24">
                <rect x="2" y="6" width="20" height="12" fill="#fff" stroke="#000" stroke-width="1"/>
                <line x1="2" y1="10" x2="22" y2="10" stroke="#000" stroke-width="1"/>
                <line x1="2" y1="14" x2="22" y2="14" stroke="#000" stroke-width="1"/>
                <line x1="6" y1="6" x2="6" y2="18" stroke="#000" stroke-width="1"/>
                <line x1="10" y1="6" x2="10" y2="18" stroke="#000" stroke-width="1"/>
                <line x1="14" y1="6" x2="14" y2="18" stroke="#000" stroke-width="1"/>
                <line x1="18" y1="6" x2="18" y2="18" stroke="#000" stroke-width="1"/>
              </svg>
            </button>
            <button id="note-color-toggle-btn" class="pressed">
              <!-- Note icon -->
              <svg viewBox="0 0 24 24">
                <path d="M12 3v10.15A4 4 0 1 0 14 17V7h4V3z" fill="#fff"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="control-group">
          <div class="group-label"><span>Notepad</span></div>
          <div class="group-buttons">
            <button id="toggle-editor-btn">
              <!-- Notepad with pencil icon -->
              <svg viewBox="0 0 24 24">
                <path d="M3 3h14v14H3V3zm2 2v10h10V5H5zm12 2l2 2v8a1 1 0 0 1-1 1h-8l-2-2h8V7z" fill="#fff"/>
                <path d="M5.5 9L11 14.5l1.5-1.5L7 7.5 5.5 9z" fill="#fff"/>
                <path d="M14.172 8.828l-1.414-1.414L8 12.172V14h1.828l4.344-4.344z" fill="#fff"/>
                <path d="M15.05 9.95l1.414-1.414-2.121-2.122-1.415 1.415z" fill="#fff"/>
              </svg>
            </button>
            <button id="add-editor-content-btn">M+</button>
          </div>
        </div>
      </div>
      <!-- LCD displays container -->
      <div id="lcd-displays">
        <!-- Midi Device Group -->
        <div class="control-group">
          <div class="group-label"><span>Midi Device</span></div>
          <!-- Device section -->
          <div id="device-section">
            <div id="device-display">
              <span id="selected-device">No Device Selected</span>
              <button id="device-toggle-btn">
                <!-- Down arrow icon -->
                <svg viewBox="0 0 24 24">
                  <polyline points="6,9 12,15 18,9" fill="none" stroke="#000" stroke-width="2"/>
                </svg>
              </button>
            </div>
            <div id="device-list-container">
              <ul id="device-list"></ul>
            </div>
          </div>
        </div>
        <!-- Playlist Group -->
        <div class="control-group">
          <div class="group-label"><span>Playlist</span></div>
          <!-- Memory section -->
          <div id="memory-section">
            <div id="memory-display">
              <span id="selected-memory">No Memory Selected</span>
              <button id="memory-toggle-btn">
                <!-- Down arrow icon -->
                <svg viewBox="0 0 24 24">
                  <polyline points="6,9 12,15 18,9" fill="none" stroke="#000" stroke-width="2"/>
                </svg>
              </button>
              <button id="duplicate-memory-btn">
                <!-- Plus icon -->
                <svg viewBox="0 0 24 24">
                  <line x1="12" y1="5" x2="12" y2="19" stroke="#000" stroke-width="2"/>
                  <line x1="5" y1="12" x2="19" y2="12" stroke="#000" stroke-width="2"/>
                </svg>
              </button>
            </div>
            <div id="memory-list-container">
              <ul id="memory-list"></ul>
            </div>
          </div>
        </div>
        <!-- Tempo Group -->
        <div class="control-group">
          <div class="group-label"><span>Tempo</span></div>
          <div class="group-buttons">
            <div id="tempo-display">
              <!-- Display the current tempo -->
              <div id="tempo-value">100%</div>
              <!-- Slider input for tempo -->
              <input type="range" id="tempo-slider" min="10" max="400" step="10" value="100">
            </div>
          </div>
        </div>
        <!-- Key Group -->
        <div class="control-group">
          <div class="group-label"><span>Key</span></div>
          <div class="group-buttons">
            <div id="transpose-amount" class="transpose-amount">0</div>
            <button id="transpose-down-btn" class="text-button metal-button">-</button>
            <button id="transpose-up-btn" class="text-button metal-button">+</button>
          </div>
        </div>
      </div>
    </div>
    <!-- Midi Channel Section -->
    <div id="midi-channel-section" class="control-group">
      <div class="group-label"><span>Midi Channel</span></div>
      <div class="group-buttons">
        <button data-channel="Omni" class="channel-button pressed">All</button>
        <button data-channel="1" class="channel-button">1</button>
        <button data-channel="2" class="channel-button">2</button>
        <button data-channel="3" class="channel-button">3</button>
        <button data-channel="4" class="channel-button">4</button>
        <button data-channel="5" class="channel-button">5</button>
        <button data-channel="6" class="channel-button">6</button>
        <button data-channel="7" class="channel-button">7</button>
        <button data-channel="8" class="channel-button">8</button>
        <button data-channel="9" class="channel-button">9</button>
        <button data-channel="10" class="channel-button">10</button>
        <button data-channel="11" class="channel-button">11</button>
        <button data-channel="12" class="channel-button">12</button>
        <button data-channel="13" class="channel-button">13</button>
        <button data-channel="14" class="channel-button">14</button>
        <button data-channel="15" class="channel-button">15</button>
        <button data-channel="16" class="channel-button">16</button>
      </div>
    </div>

    <div id="piano"></div>
    <div id="annotation-display" style="display: none;"></div>
    <!-- Memory Editor Container -->
    <div id="memory-editor-container" style="display: none;">
      <div id="memory-editor-name">
        <!-- Memory Name label and input will be populated dynamically -->
      </div>
      <div id="memory-editor-controls">
        <div id="memory-add-controls">
          <div class="group-label"><span>Events</span></div>
          <div id="memory-add-fields">
            <input type="text" id="add-notes-input" placeholder="Notes">
            <input type="number" id="add-velocity-input" value="100" placeholder="Velocity" min="1" max="127">
            <input type="text" id="add-start-input" placeholder="Start">
            <input type="number" id="add-duration-input" placeholder="Duration" step="0.001">
            <select id="add-channel-select">
              <option value="Omni">Omni</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
              <option value="7">7</option>
              <option value="8">8</option>
              <option value="9">9</option>
              <option value="10">10</option>
              <option value="11">11</option>
              <option value="12">12</option>
              <option value="13">13</option>
              <option value="14">14</option>
              <option value="15">15</option>
              <option value="16">16</option>
            </select>
            <input type="number" id="add-cc-number-input" placeholder="CC#" min="0" max="127">
            <input type="number" id="add-cc-value-input" placeholder="CCV" min="0" max="127">
            <input type="number" id="add-pc-input" placeholder="PC">
          </div>
          <button id="add-entry-btn">Add</button>
          <div id="event-filters">
            <div class="filter-group">
              <div class="group-label"><span>Hide</span></div>
              <div id="event-type-filters" class="group-buttons">
                <button id="filter-note-on-btn" class="filter-button ">On</button>
                <button id="filter-note-off-btn" class="filter-button ">Off</button>
                <button id="filter-cc-btn" class="filter-button ">CC</button>
                <button id="filter-pc-btn" class="filter-button ">PC</button>
              </div>
            </div>
            <div class="separator"></div>
            <div class="filter-group">
              <div class="group-label"><span>Show</span></div>
              <div id="channel-filters" class="group-buttons">
                <button class="channel-filter-button  pressed" data-channel="All">All</button>
                <button class="channel-filter-button " data-channel="1">1</button>
                <button class="channel-filter-button " data-channel="2">2</button>
                <button class="channel-filter-button " data-channel="3">3</button>
                <button class="channel-filter-button " data-channel="4">4</button>
                <button class="channel-filter-button " data-channel="5">5</button>
                <button class="channel-filter-button " data-channel="6">6</button>
                <button class="channel-filter-button " data-channel="7">7</button>
                <button class="channel-filter-button " data-channel="8">8</button>
                <button class="channel-filter-button " data-channel="9">9</button>
                <button class="channel-filter-button " data-channel="10">10</button>
                <button class="channel-filter-button " data-channel="11">11</button>
                <button class="channel-filter-button " data-channel="12">12</button>
                <button class="channel-filter-button " data-channel="13">13</button>
                <button class="channel-filter-button " data-channel="14">14</button>
                <button class="channel-filter-button " data-channel="15">15</button>
                <button class="channel-filter-button " data-channel="16">16</button>
              </div>
            </div>
            <div class="separator"></div>
            <div class="filter-group">
              <div class="group-label"><span>Show</span></div>
              <div id="note-filters" class="group-buttons">
                <button class="note-filter-button pressed" data-note="All">All</button>
                <button class="note-filter-button " data-note="A">A</button>
                <button class="note-filter-button " data-note="B">B</button>
                <button class="note-filter-button " data-note="C">C</button>
                <button class="note-filter-button " data-note="D">D</button>
                <button class="note-filter-button " data-note="E">E</button>
                <button class="note-filter-button " data-note="F">F</button>
                <button class="note-filter-button " data-note="G">G</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  <div id="editor-container">
    <!-- Toolbar container -->
    <div id="toolbar">
      <button class="ql-bold"></button>
      <button class="ql-italic"></button>
      <button class="ql-underline"></button>
      <button class="ql-strike"></button>
      <select class="ql-color">
        <!-- Colors will be populated by app.js -->
      </select>
      <select class="ql-background">
        <!-- Background colors will be populated by app.js -->
      </select>
      <button class="ql-script" value="sub"></button>
      <button class="ql-script" value="super"></button>
      <select class="ql-align"></select>
      <button class="ql-list" value="ordered"></button>
      <button class="ql-list" value="bullet"></button>
      <button class="ql-indent" value="-1"></button>
      <button class="ql-indent" value="+1"></button>
      <button class="ql-blockquote"></button>
      <button class="ql-code-block"></button>
      <button class="ql-link"></button>
      <button class="ql-clean"></button>
      <!-- Modified Embed button -->
      <button id="insert-iframe-btn">Embed</button>
      <div class="spacer"></div>
    </div>
    <div id="editor"></div>
  </div>

  <script src="https://unpkg.com/midiwriter-js@2.1.1/dist/MidiWriter.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
